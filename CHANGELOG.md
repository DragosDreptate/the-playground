# Changelog

Les évolutions du Playground, jour après jour.

> Ce projet est construit avec [Claude Code](https://claude.ai/claude-code) (Anthropic).

<!-- Release notes generated by release-please. Do not edit this section manually. -->

## [Unreleased]

---

## [1.4.0] — 2026-02-26 — Performance & Admin enrichi

### Amélioré

- **Dashboard** : streaming Suspense — FCP réduit de ~3.5 s à <0.5 s grâce à `loading.tsx` + `<Suspense>` interne
  - Squelette instantané à la navigation, données streamées en arrière-plan
  - `shouldRedirectToWelcome` extrait en fonction pure (testable, 10 cas couverts)
- **Audit perf** : corrections N+1, transactions atomiques, ISR et parallélisation des requêtes

### Ajouté

- **Admin — Commentaires** : compteur global (stats dashboard) + détail par événement (liste + fiche)

---

## [1.3.0] — 2026-02-26 — PWA & Notifications événement

### Ajouté

- Support **Progressive Web App** : installable sur iOS (Safari) et Android (Chrome)
  - Icônes haute résolution (192×512px), manifest, service worker
  - Landing page : section « Télécharger l'app » avec badges iOS/Android et instructions pas-à-pas
  - Mode standalone : redirection automatique vers le dashboard, logo adapté (plus de flash landing)
- Notifications email aux participants en cas de **changement de date, heure ou lieu** d'un événement
  - Email avec les modifications mises en évidence + nouvelle invitation calendrier (ICS)
- Footer : affichage de la **version de l'app** à côté du copyright

### Corrigé

- ICS : décalage horaire corrigé dans `combineDateAndTime` (heure locale → UTC)
- Formatage des dates : centralisation via `Intl` + fuseau `Europe/Paris` (supprime les erreurs SSR/hydration)
- Sentry : capture des erreurs inattendues côté serveur (unexpected response + hydration)
- Config : `bodySizeLimit` des Server Actions augmenté à 4 Mo
- i18n : bouton « Publier » sur le formulaire événement (était « Submit »)

---

## [1.2.0] — 2026-02-25 — Préférences de notifications

### Ajouté

- Page Profil : tab **Notifications** avec 4 toggles opt-out (tout activé par défaut)
  - En tant qu'Organisateur : nouvelle inscription, nouveau commentaire, nouveau follower
  - En tant que Participant : nouvel événement dans une Communauté suivie
- Guards email : les notifications respectent les préférences de chaque destinataire
- Script `pnpm db:backfill-notification-prefs` — correction des valeurs pour les users existants

---

## [1.1.0] — 2026-02-25 — Polish & sécurité

### Ajouté

- Explorer : pagination "Voir plus" — chargement par batch de 12 Communautés ou événements
- Page Communauté dashboard : section lien partageable pour les Organisateurs (avec copie en un clic)
- Liste des membres et des inscrits : vue verticale 1 par ligne, badge Organisateur avec couronne, "Voir plus" à partir de 10
- Navigation : mise en évidence de la page active dans le header et le menu mobile
- Authentification : icônes Google et GitHub sur les boutons OAuth
- Page À propos : section "Le code" avec lien vers le dépôt GitHub

### Corrigé

- Covers des événements absentes de la timeline publique d'une Communauté
- Hydration error sur les dates du dashboard
- NotFoundError iOS Safari sur les menus déroulants (Select)
- Layout mobile Explorer et Dashboard
- Google Maps : migration vers Embed API v1

### Sécurité

- Corrections SAST : SSRF, auth guard, CSP, HSTS
- CSP : autorisation des sous-domaines Vercel Blob et Google Maps
- DAST OWASP ZAP : scan baseline prod + scan full sur les previews PRs

---

## [1.0.0] — 2026-02-24 — Release majeure

### Ajouté

- Dashboard "Mes Communautés" : cartes style Explorer — cover 1:1, catégorie, badge rôle, stats membres/événements, prochain événement, bouton "Créer un événement" pour les Organisateurs
- Type domaine `DashboardCircle` + usecase `getUserDashboardCircles` + requête repository unique (sans N+1)

### Modifié

- Dashboard "Mes événements" : couverture déplacée à gauche (64px), titre sur 2 lignes, badge aligné à droite
- Explorer : refonte cartes événement — cover 1:1, alignement sur les cartes Communauté, badges Organisateur / Inscrit / Liste d'attente, grille 3 colonnes
- Sélecteur d'image de couverture : corrections mobiles iOS Safari (plein écran, grille 2 colonnes)

### Corrigé

- Optimisations SQL : count côté base + `take: 1` sur les moments à venir (suppression du sur-fetching)

---

## [0.10.0] — 2026-02-23 — À propos & Changelog

### Ajouté

- Page À propos — histoire du projet, le problème, la réponse, où on en est
- Page Changelog — timeline des versions, mise à jour automatique à chaque release
- Automatisation des releases (release-please)

---

## [0.9.0] — 2026-02-23 — Polish & terminologie

### Ajouté

- Page de bienvenue pour les nouveaux utilisateurs après onboarding

### Modifié

- Terminologie FR simplifiée : Cercle → Communauté, Escale → événement, Mon Playground → Mon espace
- Section d'inscription repensée : bouton S'inscrire + compteur de places sur une même ligne
- Badges de rôle et de statut harmonisés sur toutes les vues

---

## [0.8.0] — 2026-02-21 — Finition produit

### Ajouté

- Upload d'avatar sur le profil (avec protection OAuth)
- Suppression de compte depuis la page profil
- Boutons "Ajouter au calendrier" après inscription (Google Calendar + .ics)
- Position dans la liste d'attente affichée sur la page événement
- Pages légales (mentions légales, confidentialité, CGU)
- SEO & OpenGraph — images dynamiques, sitemap, robots.txt
- Design responsive mobile complet

---

## [0.7.0] — 2026-02-21 — Emails transactionnels

### Ajouté

- Confirmation d'inscription par email
- Email de confirmation liste d'attente
- Email de promotion liste d'attente ("une place s'est libérée !")
- Notification à l'organisateur à chaque nouvelle inscription
- Pièce jointe .ics dans les emails de confirmation

---

## [0.6.0] — 2026-02-21 — Admin plateforme

### Ajouté

- Tableau de bord admin avec statistiques (utilisateurs, communautés, événements, inscriptions)
- Gestion des utilisateurs, communautés et événements (recherche, détail, suppression)
- Possibilité de forcer l'annulation d'un événement

---

## [0.5.0] — 2026-02-21 — Découverte publique

### Ajouté

- Page Découvrir — répertoire public de Communautés et d'événements, filtrable par catégorie
- Pages Communauté publiques, accessibles sans compte
- Page d'accueil avec présentation du produit

---

## [0.4.0] — 2026-02-21 — Design premium

### Modifié

- Dashboard redesigné : timeline unifiée à venir / passés, états vides avec appel à l'action
- Page Communauté redesignée : 2 colonnes, toggle À venir / Passés
- Page Profil redesignée : avatar, stats, métadonnées
- Liste des membres : Organisateurs en premier, emails visibles pour les Organisateurs uniquement

---

## [0.3.0] — 2026-02-21 — Engagement

### Ajouté

- Fil de commentaires sur chaque événement
- Autocomplétion d'adresse (API BAN) dans le formulaire événement
- Événements annulés visibles dans la timeline de la Communauté

---

## [0.2.0] — 2026-02-20 — Parcours complet

### Ajouté

- Inscriptions : s'inscrire, annuler, consulter la liste des participants
- Liste d'attente avec promotion automatique sur désistement
- Rejoindre un événement inscrit automatiquement à la Communauté
- Tableau de bord : "Mes prochains événements" et "Mes Communautés"
- Profil utilisateur et onboarding au premier login

---

## [0.1.0] — 2026-02-19 — Fondations

### Ajouté

- Création et gestion de Communautés et d'événements
- Page événement publique et partageable (`/m/[slug]`)
- Authentification — Magic link + Google + GitHub
- Interface bilingue FR / EN
- Déploiement — Vercel (EU) + PostgreSQL serverless (Neon EU)
